# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        sass dart-sass 1.86.0
# Change github.tarball_from to 'releases' or 'archive' next update
github.tarball_from tarball
categories          www textproc
supported_archs     x86_64 arm64
license             MIT
maintainers         @queensferryme openmaintainer
description         The reference implementation of Sass, written in Dart.
long_description    Dart Sass is the primary implementation of Sass, which means \
                    it gets new features before any other implementation. It's fast, \
                    easy to install, and it compiles to pure JavaScript which makes it \
                    easy to integrate into modern web development workflows.
homepage            https://sass-lang.com/dart-sass

checksums           rmd160  f6653358cc81890c0c8f46e3070dc77d66bf5cf0 \
                    sha256  dee2a188a015f7a049a8c754e9b1c9aee581c1e9f4f93ba7b9570044c37d0b5a \
                    size    728779

use_configure       no

depends_build       port:dart-sdk port:buf
build               {
    system -W ${worksrcpath} "dart pub get"
    system -W ${worksrcpath} "dart run grinder protobuf"
    system -W ${worksrcpath} "dart compile exe -Dversion=${version} bin/sass.dart"
}

destroot {
    xinstall ${worksrcpath}/bin/sass.exe ${destroot}${prefix}/bin/sass
}
